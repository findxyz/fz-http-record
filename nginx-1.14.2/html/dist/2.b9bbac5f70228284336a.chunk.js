webpackJsonp([2],{46:function(t,e,r){var o=r(18)(r(49),r(55),null,null);o.options.__file="F:\\iview-project-3.0\\src\\views\\home\\record.vue",o.esModule&&Object.keys(o.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] record.vue: functional components are not supported with templates, they should use render functions."),t.exports=o.exports},49:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={mounted:function(){this.cardHeight=window.innerHeight-this.$refs.card.$el.offsetTop-15+"px"},watch:{data:function(){setTimeout(function(){var t=document.querySelector(".ivu-table-body");t.scrollTop=t.scrollHeight},1)}},computed:{hostAble:function(){return this.recordSetting.proxyRunning},proxyStatus:function(){return this.recordSetting.proxyRunning?"error":"primary"},proxyStatusDesc:function(){return this.recordSetting.proxyRunning?"停止代理（代理已启动，端口号：23333）":"启动代理"},scrollStatus:function(){return this.recordSetting.scrollAble?"success":"info"},scrollStatusDesc:function(){return this.recordSetting.scrollAble?"停止滚动":"启动滚动"}},data:function(){var t=this;return{cardHeight:"0px",recordSetting:{host:"",urlFilter:"",hostFilter:"",loopTimer:null,lastRecordId:"0",scrollAble:!0,proxyRunning:!1,proxyToggleAble:!0},recordData:{request:[],response:[]},columns:[{title:"域名",key:"host",width:260},{title:"方法",key:"method",width:150},{title:"请求地址",key:"url"},{title:"操作",key:"action",width:150,align:"center",render:function(e,r){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.recordDetail(r.row.id)}}},"详细信息")])}}],data:[]}},methods:{proxyToggle:function(){this.recordSetting.proxyToggleAble&&this.recordSetting.proxyRunning?this.proxyStop():this.proxyStart()},proxyStart:function(){var t=this;this.recordSetting.proxyToggleAble=!1,this.$apis.proxyStart({host:t.recordSetting.host},function(e){t.recordSetting.proxyToggleAble=!0,e.data.success?(t.recordSetting.proxyRunning=!0,t.scrollStart()):t.$Modal.info({title:"提示",content:e.data.message})},function(e){t.recordSetting.proxyToggleAble=!0,t.recordSetting.proxyRunning=!1,t.scrollStop(),t.recordSetting.lastRecordId="0",t.$Modal.info({title:"提示",content:"代理服务没响应"})})},proxyStop:function(){var t=this;this.recordSetting.proxyToggleAble=!1,this.$apis.proxyStop(function(e){t.recordSetting.proxyToggleAble=!0,e.data.success?(t.recordSetting.proxyRunning=!1,t.scrollStop(),t.recordSetting.lastRecordId="0"):t.$Modal.info({title:"提示",content:e.data.message})},function(e){t.recordSetting.proxyToggleAble=!0,t.recordSetting.proxyRunning=!1,t.scrollStop(),t.recordSetting.lastRecordId="0",t.$Modal.info({title:"提示",content:"代理服务没响应"})})},scrollToggle:function(){this.recordSetting.scrollAble?this.scrollStop():this.scrollStart()},scrollClear:function(){this.data=[]},scrollStart:function(){var t=this;this.scrollStop(),t.recordSetting.scrollAble=!0,t.recordQuery()},scrollStop:function(){this.recordSetting.scrollAble=!1,this.recordQueryStop()},recordQuery:function(){var t=this;t.recordSetting.loopTimer=setTimeout(function(){t.$apis.recordQuery({lastRecordId:t.recordSetting.lastRecordId},function(e){if(e.data.success){var r=e.data.data;if(r&&r.length>0){for(var o=0;o<r.length;o++){var n=!1,i=!1;t.recordSetting.hostFilter?r[o].host.indexOf(t.recordSetting.hostFilter)>-1&&(n=!0):n=!0,t.recordSetting.urlFilter?r[o].url.indexOf(t.recordSetting.urlFilter)>-1&&(i=!0):i=!0,n&&i&&t.data.push(r[o])}t.data.length>100&&t.data.splice(0,50),t.recordSetting.lastRecordId=r[r.length-1].id}}else t.$Modal.info({title:"提示",content:e.data.message});t.recordQuery()},function(e){t.proxyStop()})},1e3)},recordQueryStop:function(){this.recordSetting.loopTimer&&(clearTimeout(this.recordSetting.loopTimer),this.recordSetting.loopTimer=null)},recordDetail:function(t){var e=this;e.recordData.request=[],e.recordData.response=[],this.$apis.recordDetail({recordId:t},function(t){t.data.success?(e.recordData.request=t.data.data.request,e.recordData.response=t.data.data.response):e.$Modal.info({title:"提示",content:t.data.message})},function(t){e.proxyStop()})}}}},55:function(t,e,r){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticStyle:{"margin-bottom":"3px"}},[r("Input",{attrs:{placeholder:"录制请求的域名，空格分割，* 代表所有，空代表不录制",disabled:t.hostAble,size:"large"},model:{value:t.recordSetting.host,callback:function(e){t.$set(t.recordSetting,"host",e)},expression:"recordSetting.host"}})],1),t._v(" "),r("Button",{staticStyle:{"margin-bottom":"3px"},attrs:{size:"large",type:t.proxyStatus,shape:"circle",disabled:!t.recordSetting.proxyToggleAble,long:""},on:{click:t.proxyToggle}},[t._v("\n        "+t._s(t.proxyStatusDesc)+"\n    ")]),t._v(" "),r("div",{staticStyle:{"margin-bottom":"3px"}},[r("Row",[r("Col",{attrs:{span:"12"}},[r("Input",{staticStyle:{"margin-right":"1px"},attrs:{placeholder:"HOST字符串匹配",size:"large",disabled:!t.recordSetting.proxyRunning},model:{value:t.recordSetting.hostFilter,callback:function(e){t.$set(t.recordSetting,"hostFilter",e)},expression:"recordSetting.hostFilter"}})],1),t._v(" "),r("Col",{attrs:{span:"12"}},[r("Input",{staticStyle:{"margin-left":"1px"},attrs:{placeholder:"URL字符匹配",size:"large",disabled:!t.recordSetting.proxyRunning},model:{value:t.recordSetting.urlFilter,callback:function(e){t.$set(t.recordSetting,"urlFilter",e)},expression:"recordSetting.urlFilter"}})],1)],1)],1),t._v(" "),r("Row",[r("Col",{attrs:{span:"12"}},[r("Button",{staticStyle:{"margin-bottom":"3px","margin-left":"1px"},attrs:{size:"large",type:"info",shape:"circle",disabled:!t.recordSetting.proxyRunning,long:""},on:{click:t.scrollClear}},[t._v("\n                清空\n            ")])],1),t._v(" "),r("Col",{attrs:{span:"12"}},[r("Button",{staticStyle:{"margin-bottom":"3px","margin-right":"1px"},attrs:{size:"large",type:t.scrollStatus,shape:"circle",disabled:!t.recordSetting.proxyRunning,long:""},on:{click:t.scrollToggle}},[t._v("\n                "+t._s(t.scrollStatusDesc)+"\n            ")])],1)],1),t._v(" "),r("Table",{ref:"table",attrs:{border:"",columns:t.columns,data:t.data,height:"260"}}),t._v(" "),r("Row",{ref:"card",staticStyle:{background:"#eee","padding-top":"3px"}},[r("Col",{attrs:{span:"12"}},[r("Card",{style:{height:t.cardHeight,"overflow-y":"scroll","overflow-wrap":"break-word"}},[r("p",{staticStyle:{color:"green"},attrs:{slot:"title"},slot:"title"},[t._v("\n                    请求明细\n                ")]),t._v(" "),t._l(t.recordData.request,function(e){return r("p",[t._v("\n                    "+t._s(e)+"\n                ")])})],2)],1),t._v(" "),r("Col",{attrs:{span:"12"}},[r("Card",{style:{height:t.cardHeight,"overflow-y":"scroll","overflow-wrap":"break-word"}},[r("p",{staticStyle:{color:"blue"},attrs:{slot:"title"},slot:"title"},[t._v("\n                    响应明细\n                ")]),t._v(" "),t._l(t.recordData.response,function(e){return r("p",[t._v("\n                    "+t._s(e)+"\n                ")])})],2)],1)],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0}});